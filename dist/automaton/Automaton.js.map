{"version":3,"sources":["../../src/automaton/Automaton.ts"],"names":["myLog","State","constructor","name","isAccepting","isInitial","alphabet","Array","from","outTransitions","Map","inTransitions","successors","Set","predecessor","symbol","set","addTransition","state","get","includes","push","add","getSuccessor","getPredecessor","bottom","Automaton","continueAction","stateList","complete","allStates","initialStates","filter","s","acceptingStates","currentStates","states","forEach","e","states_rename","set_state_rename","values","next","value","findTransition","length","counter_init","size","_name","next_step","next_char","undefined","newCurrentState","cs","nextStates","nextState","alert","restart_graph","accept_word","word","restart","letter","is_accepted","some","accept_word_nfa","index","nextStates2","draw_next_step","color_node","initiate_graph","document","getElementById","classList","remove","txt","automatonToDot","d3","select","graphviz","dot","zoom","render","$","replaceWith","get_current_graph_node","node","text","find","innerHTML","nextSibling","matrix_to_mermaid","mermaidTxt","concat","triples","j","stateA_concat_stateB","Object","keys","map","x","create_triple","join","_","get_state_rename","transition","split","A","B","toFill","currentState","current_circle","A_rename","B_rename","create_entering_arrow","state_number","transition_number","flat","reduce","a","b","minimize","toExplore","newState","shift","successor","P","p","pLength","W","X","succ","Y","S1","S2","has","y","splice","indexOf","oldStateToNewState","newStates","partition","pos","representant","oldState","strToAutomaton","content","SYMBOL_LIST","sContent","IN_INITIAL","IN_TRANSITION","IN_ACCEPTING","statePhase","initalState","transitions","statesName","alphabetSet","line","stateName","substring","match","current","alphabetOneLetter","stateMap","stateSet","automaton","toString"],"mappings":"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","sourcesContent":["import { myLog } from \"../tools/Utilities.js\";\r\n\r\nexport class State {\r\n  isAccepting: boolean;\r\n  isInitial: boolean;\r\n  alphabet: string[];\r\n  outTransitions: Map<string, State[]>;\r\n  inTransitions: Map<string, State[]>;\r\n  successors: Set<State>;\r\n  predecessor: Set<State>;\r\n  name: string;\r\n\r\n  constructor(name: string, isAccepting: boolean, isInitial: boolean, alphabet: string[] | string) {\r\n    this.name = name;\r\n    this.isAccepting = isAccepting;\r\n    this.isInitial = isInitial;\r\n    this.alphabet = Array.from(alphabet);\r\n    this.outTransitions = new Map();\r\n    this.inTransitions = new Map();\r\n    this.successors = new Set();\r\n    this.predecessor = new Set();\r\n    for (const symbol of alphabet) {\r\n      this.outTransitions.set(symbol, []);\r\n      this.inTransitions.set(symbol, []);\r\n    }\r\n  }\r\n\r\n  addTransition(symbol: string, state: State) {\r\n    if (this.outTransitions.get(symbol)!.includes(state)) return\r\n    this.outTransitions.get(symbol)!.push(state);\r\n    this.successors.add(state);\r\n    state.predecessor.add(this);\r\n    state.inTransitions.get(symbol)!.push(this);\r\n  }\r\n\r\n  getSuccessor(symbol: string) {\r\n    return this.outTransitions.get(symbol)!\r\n  }\r\n\r\n  getPredecessor(symbol: string) {\r\n    return this.inTransitions.get(symbol)!\r\n  }\r\n\r\n  static bottom(alphabet: string[]) {\r\n    return new State(\"bottom\", false, false, alphabet)\r\n  }\r\n}\r\n\r\nexport interface AutomatonJson {\r\n  states: Map<string, State>;\r\n  initialStates: State[];\r\n  acceptingStates: State[];\r\n  alphabet: string[];\r\n};\r\n\r\nexport class Automaton implements AutomatonJson {\r\n  states: Map<string, State>;\r\n  initialStates: State[];\r\n  acceptingStates: State[];\r\n  allStates: State[];\r\n  alphabet: string[];\r\n  currentStates: State[];\r\n  states_rename: Map<string, string>;\r\n  /**\r\n   * If the HTML page can continue next action after Automaton\r\n   * with graphviz has been loaded\r\n   */\r\n  continueAction = true;\r\n\r\n  constructor(stateList: Set<State> | State[]) {\r\n    stateList = new Set(stateList);\r\n    this.complete(stateList)\r\n    this.allStates = Array.from(stateList);\r\n    this.initialStates = this.allStates.filter(s => s.isInitial);\r\n    this.acceptingStates = this.allStates.filter(s => s.isAccepting);\r\n    this.currentStates = this.initialStates;\r\n    this.alphabet = this.initialStates[0].alphabet;\r\n    this.states = new Map();\r\n    stateList.forEach(e => this.states.set(e.name, e));\r\n    this.states_rename = new Map();\r\n    this.set_state_rename()\r\n  }\r\n\r\n  complete(stateList: Set<State>) {\r\n    let alphabet = stateList.values().next().value.alphabet\r\n    let bottom = State.bottom(alphabet)\r\n    for (const state of stateList) {\r\n      for (const symbol of alphabet) {\r\n        if (this.findTransition(state, symbol).length == 0) {\r\n          stateList.add(bottom);\r\n          state.addTransition(symbol, bottom);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  set_state_rename() {\r\n    let counter_init = [0, this.initialStates.length, this.states.size - this.acceptingStates.length + 1];\r\n    for (const [_name, state] of this.states) {\r\n      if (this.initialStates.includes(state)) {\r\n        this.states_rename.set(state.name, \"q\" + counter_init[0]++)\r\n      } else if (this.acceptingStates.includes(state)) {\r\n        this.states_rename.set(state.name, \"q\" + counter_init[2]++)\r\n      } else {\r\n        this.states_rename.set(state.name, \"q\" + counter_init[1]++)\r\n      }\r\n    }\r\n  }\r\n\r\n  next_step(next_char: string) {\r\n    if (next_char == undefined) return\r\n    let newCurrentState: State[] = []\r\n    this.currentStates.forEach(cs => {\r\n      let nextStates = cs.outTransitions.get(next_char);\r\n      if (nextStates) {\r\n        nextStates.forEach(nextState => {\r\n          if (!newCurrentState.includes(nextState)) {\r\n            newCurrentState.push(nextState)\r\n          }\r\n        })\r\n      } else {\r\n        alert(\"The letter you entered in not in the alphabet !\\n The automaton has been reinitialized\");\r\n        this.restart_graph()\r\n        return\r\n      }\r\n    })\r\n    this.currentStates = newCurrentState;\r\n  }\r\n\r\n  accept_word(word: string): boolean {\r\n    this.restart()\r\n    Array.from(word).forEach(\r\n      letter => this.next_step(letter)\r\n    )\r\n    let is_accepted = this.acceptingStates.some(e => this.currentStates.includes(e));\r\n    this.restart()\r\n    return is_accepted;\r\n  }\r\n\r\n\r\n  accept_word_nfa(word: string): boolean {\r\n    if (word.length == 0)\r\n      return this.initialStates.some(e => e.isAccepting);\r\n    let nextStates: Set<State> = new Set(this.initialStates);\r\n    for (let index = 0; index < word.length && nextStates.size > 0; index++) {\r\n      let nextStates2: Set<State> = new Set();\r\n      const symbol = word[index];\r\n      if (!this.alphabet.includes(symbol)) {\r\n        alert(\"The word you entered contains a letter which is not in the alphabet !\\nThe automaton has been reinitialized\");\r\n        return false\r\n      }\r\n      for (const state of nextStates) {\r\n        for (const nextState of this.findTransition(state, symbol)) {\r\n          nextStates2.add(nextState)\r\n          if (index == word.length - 1 && nextState.isAccepting)\r\n            return true\r\n        }\r\n        // Array.from(this.findTransition(state, symbol)).forEach(e => nextStates2.add(e))\r\n      }\r\n      nextStates = nextStates2;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  findTransition(state: State, symbol: string) {\r\n    return state!.outTransitions.get(symbol)!\r\n  }\r\n\r\n  /** Automaton current state is restored to initial state */\r\n  restart() {\r\n    this.currentStates = this.initialStates;\r\n  }\r\n\r\n  /** GRAPHIC PART */\r\n\r\n  draw_next_step(next_char: string) {\r\n    this.color_node(false);\r\n    this.next_step(next_char);\r\n    this.color_node(true);\r\n  }\r\n\r\n  /**\r\n   * Create a dot file corresponding to the current automaton and \r\n   * display it in the automaton section\r\n   */\r\n  initiate_graph() {\r\n    this.continueAction = false;\r\n    document.getElementById('automatonHead')?.classList.remove('up');\r\n    let txt = this.automatonToDot();\r\n\r\n    //@ts-ignore\r\n    return d3.select(\"#graph\").graphviz()\r\n      .dot(txt).zoom(false)\r\n      .render(() => {\r\n        this.continueAction = true;\r\n        this.color_node(true);\r\n        myLog($(\"#graph\")[0].replaceWith);\r\n      });\r\n  }\r\n\r\n  restart_graph() {\r\n    this.color_node(false)\r\n    this.restart()\r\n    this.color_node(true)\r\n  }\r\n\r\n  get_current_graph_node(node: State) {\r\n    let text = Array.from($('.node title')).find(e => e.innerHTML == node.name)!;\r\n    return text.nextSibling?.nextSibling! as HTMLElement;\r\n  }\r\n\r\n  matrix_to_mermaid(): string {\r\n    let mermaidTxt = \"flowchart LR\\n\";\r\n    mermaidTxt = mermaidTxt.concat(\"\\ndirection LR\\n\")\r\n\r\n    let triples: { [id: string]: string[] } = {}\r\n    for (const [name, state] of this.states) {\r\n      for (let j = 0; j < this.alphabet.length; j++) {\r\n        for (const nextState of this.findTransition(state, this.alphabet[j])) {\r\n          let stateA_concat_stateB = name + '&' + nextState.name;\r\n          if (triples[stateA_concat_stateB]) {\r\n            triples[stateA_concat_stateB].push(this.alphabet[j])\r\n          } else {\r\n            triples[stateA_concat_stateB] = [this.alphabet[j]]\r\n          }\r\n        }\r\n      }\r\n    }\r\n    mermaidTxt = mermaidTxt.concat(Object.keys(triples).map(x => this.create_triple(x, triples[x].join(\",\"))).join(\"\\n\"));\r\n\r\n    mermaidTxt += \"\\n\"\r\n    mermaidTxt += \"\\nsubgraph InitialStates\\n\";\r\n    mermaidTxt += this.initialStates.map(e => e.name).join(\"\\n\")\r\n    mermaidTxt += \"\\nend\"\r\n    mermaidTxt += \"\\n\"\r\n    mermaidTxt = mermaidTxt.concat(this.acceptingStates.map(e => `style ${e.name} fill:#FFFF00, stroke:#FF00FF;\\n`).join(\"\"));\r\n    mermaidTxt += \"\\n\"\r\n    // Callback for tooltip on mouse over\r\n    mermaidTxt = mermaidTxt.concat(Array.from(this.states).map(([name, _]) => `click ${name} undnamefinedCallback \"${name}\";`).join(\"\\n\"))\r\n    myLog(mermaidTxt);\r\n\r\n    this.automatonToDot()\r\n    return mermaidTxt;\r\n  }\r\n\r\n  automatonToDot() {\r\n    let txt = \"digraph {rankdir = LR\\n\"\r\n    let triples: { [id: string]: string[] } = {}\r\n    for (const [name, state] of this.states) {\r\n      for (let j = 0; j < this.alphabet.length; j++) {\r\n        for (const nextState of this.findTransition(state, this.alphabet[j])) {\r\n          let stateA_concat_stateB = name + '&' + nextState.name;\r\n          if (triples[stateA_concat_stateB]) {\r\n            triples[stateA_concat_stateB].push(this.alphabet[j])\r\n          } else {\r\n            triples[stateA_concat_stateB] = [this.alphabet[j]]\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    txt = txt.concat(\r\n      this.allStates.map(e => `${e.name} [label=\"${this.get_state_rename(e.name)\r\n        }\", shape=circle]`).join(\"\\n\"));\r\n    txt += '\\n';\r\n\r\n    txt = txt.concat(Object.keys(triples).map(x => {\r\n      let [states, transition] = [x, triples[x].join(\",\")]\r\n      let split = states.split(\"&\");\r\n      let A = split[0], B = split[1];\r\n      return `${A} -> ${B} [label = \"${transition}\"]`\r\n    }).join(\"\\n\"));\r\n\r\n    this.initialStates.forEach(s => {\r\n      txt = txt.concat(`\\nI${s.name} [label=\"\", style=invis, width=0]\\nI${s.name} -> ${s.name}`);\r\n    });\r\n\r\n    this.acceptingStates.forEach(s => {\r\n      txt = txt.concat(`\\n${s.name} [shape=doublecircle]`)\r\n      myLog(\"here\");\r\n\r\n    })\r\n\r\n    txt += \"\\n}\"\r\n    myLog(txt);\r\n\r\n    return txt\r\n  }\r\n\r\n\r\n  color_node(toFill: boolean) {\r\n    this.currentStates.forEach(currentState => {\r\n      let current_circle = this.get_current_graph_node(currentState);\r\n      if (toFill) {\r\n        current_circle.classList.add('currentNode');\r\n      } else {\r\n        current_circle.classList.remove('currentNode');\r\n      }\r\n    })\r\n  }\r\n\r\n  create_triple(states: string, transition: string): string {\r\n    let split = states.split(\"&\");\r\n    let A = split[0], B = split[1];\r\n    let A_rename = this.get_state_rename(A);\r\n    let B_rename = this.get_state_rename(B);\r\n    return `${A}((${A_rename})) -->| ${transition} | ${B}((${B_rename}))`;\r\n  }\r\n\r\n  create_entering_arrow(): string {\r\n    return `START[ ]--> ${this.initialStates}`\r\n  }\r\n\r\n  get_state_rename(name: string) {\r\n    return this.states_rename.get(name)!\r\n  }\r\n\r\n  state_number() {\r\n    return this.states.size;\r\n  }\r\n\r\n  transition_number() {\r\n    return Array.from(this.states).map(e => Array.from(e[1].outTransitions)).flat().reduce((a, b) => a + b[1].length, 0)\r\n  }\r\n\r\n\r\n  /**\r\n   * Usage of Filling table algorithm for Automaton Minimisation \\\r\n   * The automaton should be in DFA form else the algorithm won't work\r\n   */\r\n  minimize() {\r\n\r\n    let stateList: State[] = [this.initialStates[0]];\r\n\r\n    // BFS to remove not reachable node from initial state\r\n    let toExplore = [this.initialStates[0]]\r\n    while (toExplore.length > 0) {\r\n      let newState = toExplore.shift()!\r\n      for (const successor of newState.successors) {\r\n        if (!stateList.includes(successor)) {\r\n          toExplore.push(successor)\r\n          stateList.push(successor)\r\n        }\r\n      }\r\n    }\r\n\r\n    let P: Set<State>[] = [new Set(), new Set()]; // P := {F, Q \\ F}\r\n    stateList.forEach(s => (s.isAccepting ? P[0] : P[1]).add(s))\r\n    P = P.filter(p => p.size > 0)\r\n\r\n    let pLength = () => P.reduce((a, p) => a + p.size, 0)\r\n\r\n    let W: Set<State>[] = Array.from(P) // W := {F, Q \\ F}\r\n    while (W.length > 0) {\r\n      let A = W.shift()!\r\n      for (const letter of this.alphabet) {\r\n        // X = the set of states for which a transition on letter leads to a state in A\r\n        let X: Set<State> = new Set()\r\n        A.forEach(e => {\r\n          let succ = e.inTransitions.get(letter)\r\n          if (succ) succ.forEach(s => X.add(s))\r\n        })\r\n\r\n        // let S1 = X ∩ Y and S2 = Y \\ X and S3 = X \\ Y and Y in P\r\n        let Y = P.map(p => {\r\n          let S1: Set<State> = new Set(),\r\n            S2: Set<State> = new Set();\r\n          for (const state of p) {\r\n            if (X.has(state)) S1.add(state)\r\n            else S2.add(state)\r\n          }\r\n          return { y: p, S1: S1, S2: S2 }\r\n        }).filter(({ S1, S2 }) => S1.size > 0 && S2.size > 0)\r\n        for (const { y, S1, S2 } of Y) {\r\n          // replace Y in P by the two sets X ∩ Y and Y \\ X\r\n          P.splice(P.indexOf(y), 1)\r\n          P.push(S1)\r\n          P.push(S2)\r\n          if (pLength() != stateList.length) throw `Wanted ${stateList.length} had ${pLength()}`\r\n          if (W.includes(y)) {\r\n            W.splice(W.indexOf(y), 1)\r\n            W.push(S1)\r\n            W.push(S2)\r\n          } else {\r\n            if (S1.size <= S2.size) {\r\n              W.push(S1)\r\n            } else {\r\n              W.push(S2)\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    let oldStateToNewState: Map<State, State> = new Map();\r\n\r\n    let newStates = new Set(Array.from(P).filter(partition => partition.size > 0).map((partition, pos) => {\r\n      let representant = Array.from(partition)\r\n      let newState = new State(pos + \"\",\r\n        representant.some(e => e.isAccepting),\r\n        representant.some(e => e.isInitial),\r\n        representant[0].alphabet\r\n      )\r\n      partition.forEach(state => oldStateToNewState.set(state, newState))\r\n      return newState;\r\n    }));\r\n\r\n    for (const partition of P) {\r\n      for (const oldState of partition) {\r\n        for (const letter of this.alphabet) {\r\n          for (const successor of oldState.getSuccessor(letter)) {\r\n            if (!oldStateToNewState.get(oldState)!.outTransitions.get(letter)![0] || (oldStateToNewState.get(oldState)!.outTransitions.get(letter)![0].name != oldStateToNewState.get(successor)!.name))\r\n              oldStateToNewState.get(oldState)!.addTransition(letter, oldStateToNewState.get(successor)!)\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return new Automaton(newStates)\r\n  }\r\n\r\n  static strToAutomaton(content: String) {\r\n    const SYMBOL_LIST = Array.from(\"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\")\r\n\r\n    let sContent = content.split(\"\\n\");\r\n    let IN_INITIAL = 0, IN_TRANSITION = 1, IN_ACCEPTING = 2;\r\n    let statePhase = IN_INITIAL;\r\n    const initalState: string[] = [], acceptingStates: string[] = [],\r\n      transitions: { current: string, symbol: string, next: string }[] = [],\r\n      statesName: Set<string> = new Set(), alphabetSet: Set<string> = new Set();\r\n    for (const line of sContent) {\r\n      if (!line.includes(\"-\")) {\r\n        let stateName = line.substring(line.indexOf('[') + 1, line.indexOf(']'));\r\n        statesName.add(stateName)\r\n        if (statePhase == IN_INITIAL) {\r\n          initalState.push(stateName);\r\n        } else {\r\n          statePhase = IN_ACCEPTING;\r\n          acceptingStates.push(stateName)\r\n        }\r\n      } else if (line.match(/[a-zA-Z0-9]+/)) {\r\n        statePhase = IN_TRANSITION;\r\n        let split = line.match(/[A-Za-z0-9]+/g)!;\r\n        let current = split[1];\r\n        let symbol = split[0];\r\n        let next = split[2];\r\n        transitions.push({\r\n          current: current,\r\n          next: next,\r\n          symbol: symbol\r\n        })\r\n        statesName.add(current);\r\n        statesName.add(next);\r\n        alphabetSet.add(symbol);\r\n      }\r\n    }\r\n    let alphabet = Array.from(alphabetSet);\r\n    let alphabetOneLetter = SYMBOL_LIST.splice(0, alphabet.length)\r\n    let stateMap: Map<string, State> = new Map();\r\n    let stateSet: Set<State> = new Set();\r\n    statesName.forEach(e => {\r\n      let state = new State(e, acceptingStates.includes(e), initalState.includes(e), alphabetOneLetter)\r\n      stateMap.set(e, state);\r\n      stateSet.add(state)\r\n    });\r\n    transitions.forEach(({ current, symbol, next }) =>\r\n      stateMap.get(current)!.addTransition(\r\n        alphabetOneLetter[alphabet.indexOf(symbol)],\r\n        stateMap.get(next)!)\r\n    )\r\n\r\n    let automaton = new Automaton(stateSet);\r\n    return automaton;\r\n\r\n  }\r\n\r\n  toString() {\r\n    let txt: String[] = [];\r\n    this.initialStates.forEach(e => txt.push('[' + e.name + \"]\"));\r\n    this.allStates.forEach(state =>\r\n      state.outTransitions.forEach((nextStates, symbol) => nextStates.forEach(next => txt.push(`${symbol},[${state.name}]->[${next.name}]`))));\r\n    this.acceptingStates.forEach(e => txt.push(\"[\" + e.name + \"]\"));\r\n    return txt.join('\\n');\r\n  }\r\n}"],"file":"Automaton.js"}