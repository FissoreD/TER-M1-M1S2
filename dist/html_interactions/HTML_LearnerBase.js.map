{"version":3,"sources":["../../src/html_interactions/HTML_LearnerBase.ts"],"names":["addHistoryElement","centerDivClone","clear_automaton_HTML","myLog","HTML_LearnerBase","table_counter","stopNextStep","constructor","learner","pile_actions","draw_table","tableHTML","document","createElement","table_header","createTHead","table_body","createTBody","getElementById","classList","remove","add_row_html","undefined","E","fst","s","S","row","Array","from","observation_table","length","SA","parent","head","row_elts","colspan","rowspan","convert_to_epsilon","e","create_cell_with_text","txt","cell","insertCell","innerHTML","insertRow","add","setAttribute","appendChild","letter","clear_table","next_step","automaton","continueAction","replaceWith","shift","close_action","consistence_action","send_automaton_action","message","member_number","equiv_number","state_number","transition_number","finish","teacher","description","timer","ms","Promise","res","setTimeout","tm","then","catch","a","close_rep","is_close","innerText","close_message","push","add_elt_in_S","consistence_rep","is_consistent","s1","s2","new_col","consistent_message","add_elt_in_E","make_automaton","window","initiate_graph","$","delay","resolve","scrollIntoView","answer","make_equiv","table_to_update_after_equiv","go_to_end"],"mappings":"AAEA,OAASA,iBAAT,CAA0CC,cAA1C,CAA0DC,oBAA1D,KAAsF,YAAtF,CACA,OAAqBC,KAArB,KAAkC,uBAAlC,CAGA,MAAO,MAAeC,CAAAA,gBAAwC,CAQ5DC,aAAa,CAAG,CAAH,CACbC,YAAY,CAAG,KAAH,CAEZC,WAAW,CAACC,OAAD,CAAa,CACtB,KAAKA,OAAL,CAAeA,OAAf,CACA,KAAKC,YAAL,CAAoB,CAAC,IAAM,KAAKC,UAAL,EAAP,CAApB,CAEA,KAAKC,SAAL,CAAiBC,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAjB,CACA,KAAKC,YAAL,CAAoB,KAAKH,SAAL,CAAeI,WAAf,EAApB,CACA,KAAKC,UAAL,CAAkB,KAAKL,SAAL,CAAeM,WAAf,EACnB,CAEDP,UAAU,EAAG,CACXE,QAAQ,CAACM,cAAT,CAAwB,WAAxB,GAAsCC,SAAtC,CAAgDC,MAAhD,CAAuD,IAAvD,EAEA,KAAKC,YAAL,CAAkB,KAAKP,YAAvB,CAAsC,QAAU,KAAKT,aAAL,EAAhD,CAAsEiB,SAAtE,CAAiF,KAAKd,OAAL,CAAae,CAA9F,CAAiG,CAAjG,EAKA,GAAIC,CAAAA,GAAuB,CAAG,GAA9B,CACA,IAAK,GAAIC,CAAAA,CAAT,GAAc,MAAKjB,OAAL,CAAakB,CAA3B,CAA8B,CAC5B,KAAMC,CAAAA,GAAG,CAAGC,KAAK,CAACC,IAAN,CAAW,KAAKrB,OAAL,CAAasB,iBAAb,CAA+BL,CAA/B,CAAX,CAAZ,CACA,KAAKJ,YAAL,CAAkB,KAAKL,UAAvB,CAAoCQ,GAApC,CAAyCC,CAAzC,CAA4CE,GAA5C,CAAiD,CAAjD,CAAoDH,GAAG,CAAG,KAAKhB,OAAL,CAAakB,CAAb,CAAeK,MAAlB,CAA2B,CAAlF,EACAP,GAAG,CAAGF,SACP,CAID,GAAIE,CAAAA,GAAuB,CAAG,IAA9B,CACA,IAAK,GAAIC,CAAAA,CAAT,GAAc,MAAKjB,OAAL,CAAawB,EAA3B,CAA+B,CAC7B,KAAML,CAAAA,GAAG,CAAGC,KAAK,CAACC,IAAN,CAAW,KAAKrB,OAAL,CAAasB,iBAAb,CAA+BL,CAA/B,CAAX,CAAZ,CACA,KAAKJ,YAAL,CAAkB,KAAKL,UAAvB,CAAoCQ,GAApC,CAAyCC,CAAzC,CAA4CE,GAA5C,CAAiD,CAAjD,CAAoDH,GAAG,CAAG,KAAKhB,OAAL,CAAawB,EAAb,CAAgBD,MAAnB,CAA4B,CAAnF,EACAP,GAAG,CAAGF,SACP,CACF,CAEDD,YAAY,CACVY,MADU,CACuBT,GADvB,CACgDU,IADhD,CAEVC,QAFU,CAEUC,OAAe,CAAG,CAF5B,CAE+BC,OAAe,CAAG,CAFjD,CAGV,CACA,GAAIC,CAAAA,kBAAkB,CAAIC,CAAD,EAAeA,CAAC,EAAI,EAAL,CAAU,WAAV,CAAwBA,CAAhE,CACA,GAAIC,CAAAA,qBAAqB,CAAG,CAACb,GAAD,CAA2Bc,GAA3B,GAA2C,CACrE,GAAIC,CAAAA,IAAI,CAAGf,GAAG,CAACgB,UAAJ,EAAX,CACAD,IAAI,CAACE,SAAL,CAAkB,GAAEN,kBAAkB,CAACG,GAAD,CAAM,EAC7C,CAHD,CAKA,GAAId,CAAAA,GAAG,CAAGM,MAAM,CAACY,SAAP,EAAV,CACA,GAAIrB,GAAJ,CAAS,CACPG,GAAG,CAACR,SAAJ,CAAc2B,GAAd,CAAkB,gBAAlB,EACA,GAAIJ,CAAAA,IAAI,CAAG9B,QAAQ,CAACC,aAAT,CAAuB,IAAvB,CAAX,CACA6B,IAAI,CAACK,YAAL,CAAkB,SAAlB,CAA6BV,OAAO,CAAG,EAAvC,EACAK,IAAI,CAACK,YAAL,CAAkB,SAAlB,CAA6BX,OAAO,CAAG,EAAvC,EACAM,IAAI,CAACE,SAAL,CAAiBN,kBAAkB,CAACd,GAAD,CAAnC,CACAG,GAAG,CAACqB,WAAJ,CAAgBN,IAAhB,CACD,CACD,GAAIR,IAAI,EAAIZ,SAAZ,CAAuBkB,qBAAqB,CAACb,GAAD,CAAMO,IAAN,CAArB,CACvB,IAAK,GAAIe,CAAAA,MAAT,GAAmBd,CAAAA,QAAnB,CACEK,qBAAqB,CAACb,GAAD,CAAMsB,MAAN,CAArB,CACF,MAAOtB,CAAAA,GACR,CAEDuB,WAAW,EAAG,CACZ,KAAKlC,UAAL,CAAiB4B,SAAjB,CAA6B,EAA7B,CACA,KAAK9B,YAAL,CAAmB8B,SAAnB,CAA+B,EAChC,CAEc,KAATO,CAAAA,SAAS,EAAG,CAChB,GAAI,KAAK7C,YAAL,EAAuB,KAAK8C,SAAL,EAAkB,CAAC,KAAKA,SAAL,CAAeC,cAA7D,CAA+E,OAC/EzC,QAAQ,CAACM,cAAT,CAAwB,WAAxB,EAAsCoC,WAAtC,CAAkDrD,cAAc,EAAhE,EACAW,QAAQ,CAACM,cAAT,CAAwB,WAAxB,GAAsCC,SAAtC,CAAgDC,MAAhD,CAAuD,IAAvD,EAEA,GAAI,KAAKX,YAAL,CAAkBsB,MAAlB,CAA2B,CAA/B,CAAkC,KAAM,MAAKtB,YAAL,CAAkB8C,KAAlB,IAAN,CAAlC,IACK,IAAI,CAAC,KAAKC,YAAL,EAAL,CAA0B,CAAG,CAA7B,IACA,IAAI,CAAC,KAAKC,kBAAL,EAAL,CAAgC,CAAG,CAAnC,IACA,MAAKC,qBAAL,GACL,KAAKC,OAAL,GAAef,SAAf,CACG,wBAAuB,KAAKpC,OAAL,CAAaoD,aAAc,4BAA2B,KAAKpD,OAAL,CAAaqD,YAAa,EAAxG,EAA6G,KAAKrD,OAAL,CAAa4C,SAAb,CAA0B,eAAc,KAAK5C,OAAL,CAAa4C,SAAb,EAAwBU,YAAxB,EAAuC,oBAAmB,KAAKtD,OAAL,CAAa4C,SAAb,EAAwBW,iBAAxB,EAA4C,EAA9I,CAAmJ,EAAhQ,EAAsQ,QAAO,KAAKJ,OAAL,GAAef,SAAU,EADxS,CAEA,GAAI,KAAKpC,OAAL,CAAawD,MAAjB,CAAyB,CACvB,KAAKL,OAAL,GAAef,SAAf,EAA4B,wCAA5B,CACA,KAAKtC,YAAL,CAAoB,IACrB,CACDM,QAAQ,CAACM,cAAT,CAAwB,aAAxB,GAAwCC,SAAxC,CAAkDC,MAAlD,CAAyD,IAAzD,EACAR,QAAQ,CAACM,cAAT,CAAwB,WAAxB,GAAsCC,SAAtC,CAAgDC,MAAhD,CAAuD,IAAvD,EACAR,QAAQ,CAACM,cAAT,CAAwB,qBAAxB,GAAgDC,SAAhD,CAA0DC,MAA1D,CAAiE,IAAjE,EAEAR,QAAQ,CAACM,cAAT,CAAwB,OAAxB,EAAkC0B,SAAlC,CAA8C,KAAKjC,SAAL,CAAeiC,SAA7D,CACAhC,QAAQ,CAACM,cAAT,CAAwB,qBAAxB,EAAgD0B,SAAhD,CAA4D,KAAKpC,OAAL,CAAayD,OAAb,CAAqBC,WAAjF,CACA,KAAMC,CAAAA,KAAK,CAAIC,EAAD,EAAgB,GAAIC,CAAAA,OAAJ,CAAYC,GAAG,EAAIC,UAAU,CAACD,GAAD,CAAMF,EAAN,CAA7B,CAA9B,CACA,GAAI,KAAKhB,SAAL,EAAkB,CAAC,KAAKA,SAAL,CAAeC,cAAtC,CACE,MAAO,KAAKD,SAAL,EAAkB,CAAC,KAAKA,SAAL,CAAeC,cAAzC,CAAyD,CACvD,GAAImB,CAAAA,EAAE,CAAGL,KAAK,CAAC,CAAD,CAAd,CACA,KAAMK,CAAAA,EAAE,CAACC,IAAH,CAAQ,IAAM,CAAE,GAAI,KAAKrB,SAAL,CAAgBC,cAApB,CAAoCrD,iBAAiB,CAAC,KAAKoD,SAAN,CAAkB,CAAvF,EAAyFsB,KAAzF,CAA+FnC,CAAC,EAAI,CACxGpC,KAAK,CAAC,CAAEwE,CAAC,CAAE,CAACpC,CAAD,CAAL,CAAD,CACN,CAFK,CAGP,CANH,IAMS,CACPvC,iBAAiB,CAAC,KAAKoD,SAAN,CAClB,CACF,CAEDI,YAAY,EAAY,CACtB,KAAMoB,CAAAA,SAAS,CAAG,KAAKpE,OAAL,CAAaqE,QAAb,EAAlB,CACA,GAAID,SAAS,EAAItD,SAAjB,CAA4B,CAC1B,KAAKqC,OAAL,GAAemB,SAAf,CACE,KAAKC,aAAL,CAAmBH,SAAnB,CADF,CAEA,KAAKnE,YAAL,CAAkBuE,IAAlB,CAAuB,IAAM,CAC3B,KAAKrB,OAAL,GAAemB,SAAf,CAA2B,EAA3B,CACA,KAAKtE,OAAL,CAAayE,YAAb,CAA0BL,SAA1B,EACA,KAAK1B,WAAL,GACA,KAAKxC,UAAL,EACD,CALD,EAMA,MAAO,MACR,CACD,MAAO,KACR,CAED+C,kBAAkB,EAAY,CAC5B,KAAMyB,CAAAA,eAAe,CAAG,KAAK1E,OAAL,CAAa2E,aAAb,EAAxB,CACA,GAAID,eAAe,EAAI5D,SAAvB,CAAkC,CAChC,GAAI8D,CAAAA,EAAE,CAAGF,eAAe,CAAC,CAAD,CAAxB,CACA,GAAIG,CAAAA,EAAE,CAAGH,eAAe,CAAC,CAAD,CAAxB,CACA,GAAII,CAAAA,OAAO,CAAGJ,eAAe,CAAC,CAAD,CAA7B,CACA,KAAKvB,OAAL,GAAemB,SAAf,CAA2B,KAAKS,kBAAL,CAAwBH,EAAxB,CAA4BC,EAA5B,CAAgCC,OAAhC,CAA3B,CACA,KAAK7E,YAAL,CAAkBuE,IAAlB,CAAuB,IAAM,CAC3B,KAAKrB,OAAL,GAAemB,SAAf,CAA2B,EAA3B,CACA,KAAKtE,OAAL,CAAagF,YAAb,CAA0BF,OAA1B,EACA,KAAKpC,WAAL,GACA,KAAKxC,UAAL,EACD,CALD,EAMA,MAAO,MACR,CACD,MAAO,KACR,CAEDgD,qBAAqB,EAAG,CACtB,KAAKC,OAAL,GAAemB,SAAf,CACG,8DADH,CAEA,GAAI1B,CAAAA,SAAS,CAAG,KAAK5C,OAAL,CAAaiF,cAAb,EAAhB,CAEA,KAAKrC,SAAL,CAAiBA,SAAjB,CACAsC,MAAM,CAACtC,SAAP,CAAmBA,SAAnB,CACA,KAAK3C,YAAL,CAAkBuE,IAAlB,CAAuB,SAAY,CACjC,KAAKrB,OAAL,GAAef,SAAf,CAA2B,EAA3B,CACAQ,SAAS,CAACuC,cAAV,GACAC,CAAC,CAAC,kBAAD,CAAD,CAAsB,CAAtB,EAAyBzE,SAAzB,CAAmCC,MAAnC,CAA0C,MAA1C,EAEA,QAASyE,CAAAA,KAAT,CAAezB,EAAf,CAA2B,CACzB,MAAO,IAAIC,CAAAA,OAAJ,CAAYyB,OAAO,EAAIvB,UAAU,CAACuB,OAAD,CAAU1B,EAAV,CAAjC,CACR,CAED,MAAO,CAAChB,SAAS,CAACC,cAAlB,CAAkC,CAChC,KAAMwC,CAAAA,KAAK,CAAC,EAAD,CAAL,CAAUpB,IAAV,CAAe,SAAY,CAC/B7D,QAAQ,CAACM,cAAT,CAAwB,aAAxB,EAAwC6E,cAAxC,GACA,GAAI,CAAC3C,SAAS,CAACC,cAAf,CAA+B,OAC/B,KAAMwC,CAAAA,KAAK,CAAC,EAAD,CAAL,CAAUpB,IAAV,CAAe,IAAM,CACzB,GAAIuB,CAAAA,MAAM,CAAG,KAAKxF,OAAL,CAAayF,UAAb,CAAwB7C,SAAxB,CAAb,CACAjD,KAAK,CAAC,CAAEwE,CAAC,CAAE,CAACqB,MAAD,CAAL,CAAD,CAAL,CAGA,GAAIA,MAAM,EAAI1E,SAAd,CAAyB,CACvB,KAAKqC,OAAL,GAAemB,SAAf,CACG,8DAA6DkB,MAAO,EADvE,CAEA,KAAKvF,YAAL,CAAkBuE,IAAlB,CAAuB,IAAM,CAC3B,KAAKrB,OAAL,GAAef,SAAf,CAA2B,EAA3B,CACA1C,oBAAoB,GACpB,KAAKM,OAAL,CAAa0F,2BAAb,CAAyCF,MAAzC,CAAkD,IAAlD,EACA,KAAK9C,WAAL,GACA,KAAKxC,UAAL,EACD,CAND,EAOA,MACD,CACD,KAAKF,OAAL,CAAawD,MAAb,CAAsB,IAAtB,CACC4B,CAAC,CAAC,YAAD,CAAD,CAAgB,CAAhB,CAAD,CAA0CzE,SAA1C,CAAoD2B,GAApD,CAAwD,MAAxD,EACC8C,CAAC,CAAC,YAAD,CAAD,CAAgB,CAAhB,CAAD,CAA0CzE,SAA1C,CAAoD2B,GAApD,CAAwD,MAAxD,CACD,CApBK,CAsBP,CAzBK,CA0BP,CACF,CArCD,CAsCD,CAMc,KAATqD,CAAAA,SAAS,EAAG,CAChB,MAAO,CAAC,KAAK3F,OAAL,CAAawD,MAArB,CAA6B,CAC3B,KAAM,MAAKb,SAAL,EACP,CACF,CAEDQ,OAAO,EAAG,CACR,MAAO/C,CAAAA,QAAQ,CAACM,cAAT,CAAwB,SAAxB,CACR,CAzM2D","sourcesContent":["import { Automaton } from \"../automaton/Automaton.js\";\r\nimport { LearnerBase } from \"../learners/LearnerBase.js\";\r\nimport { addHistoryElement, automatonDiv, centerDivClone, clear_automaton_HTML } from \"../Main.js\";\r\nimport { myFunction, myLog } from \"../tools/Utilities.js\";\r\n\r\n\r\nexport abstract class HTML_LearnerBase<T extends LearnerBase> {\r\n  learner: T;\r\n\r\n  table_header: HTMLTableSectionElement;\r\n  table_body: HTMLTableSectionElement;\r\n  pile_actions: myFunction<void, void>[];\r\n  automaton: Automaton | undefined;\r\n  tableHTML: HTMLTableElement;\r\n  table_counter = 0;\r\n  stopNextStep = false;\r\n\r\n  constructor(learner: T) {\r\n    this.learner = learner;\r\n    this.pile_actions = [() => this.draw_table()];\r\n\r\n    this.tableHTML = document.createElement('table');\r\n    this.table_header = this.tableHTML.createTHead();\r\n    this.table_body = this.tableHTML.createTBody();\r\n  }\r\n\r\n  draw_table() {\r\n    document.getElementById('tableHead')?.classList.remove('up');\r\n\r\n    this.add_row_html(this.table_header!, \"Table\" + this.table_counter++, undefined, this.learner.E, 2);\r\n\r\n    /**\r\n     The first {@link S}.length rows of the table start with the S symbol\r\n    */\r\n    var fst: string | undefined = \"S\";\r\n    for (var s of this.learner.S) {\r\n      const row = Array.from(this.learner.observation_table[s]);\r\n      this.add_row_html(this.table_body!, fst, s, row, 1, fst ? this.learner.S.length : 1);\r\n      fst = undefined;\r\n    }\r\n    /**\r\n     In the second part of the table, rows start with the SA symbol\r\n    */\r\n    var fst: string | undefined = \"SA\";\r\n    for (var s of this.learner.SA) {\r\n      const row = Array.from(this.learner.observation_table[s]);\r\n      this.add_row_html(this.table_body!, fst, s, row, 1, fst ? this.learner.SA.length : 1);\r\n      fst = undefined;\r\n    }\r\n  }\r\n\r\n  add_row_html(\r\n    parent: HTMLTableSectionElement, fst: string | undefined, head: string | undefined,\r\n    row_elts: string[], colspan: number = 1, rowspan: number = 1\r\n  ) {\r\n    let convert_to_epsilon = (e: string) => e == \"\" ? \"&epsilon;\" : e;\r\n    let create_cell_with_text = (row: HTMLTableRowElement, txt: string) => {\r\n      var cell = row.insertCell();\r\n      cell.innerHTML = `${convert_to_epsilon(txt)}`\r\n    };\r\n\r\n    var row = parent.insertRow();\r\n    if (fst) {\r\n      row.classList.add('borderTopTable');\r\n      var cell = document.createElement('th');\r\n      cell.setAttribute(\"rowspan\", rowspan + \"\");\r\n      cell.setAttribute(\"colspan\", colspan + \"\");\r\n      cell.innerHTML = convert_to_epsilon(fst);\r\n      row.appendChild(cell);\r\n    }\r\n    if (head != undefined) create_cell_with_text(row, head);\r\n    for (var letter of row_elts)\r\n      create_cell_with_text(row, letter)\r\n    return row;\r\n  }\r\n\r\n  clear_table() {\r\n    this.table_body!.innerHTML = \"\";\r\n    this.table_header!.innerHTML = \"\";\r\n  }\r\n\r\n  async next_step() {\r\n    if (this.stopNextStep || ((this.automaton && !this.automaton.continueAction))) return;\r\n    document.getElementById('centerDiv')!.replaceWith(centerDivClone());\r\n    document.getElementById('tableHead')?.classList.remove('up');\r\n\r\n    if (this.pile_actions.length > 0) await this.pile_actions.shift()!()\r\n    else if (!this.close_action()) { }\r\n    else if (!this.consistence_action()) { }\r\n    else this.send_automaton_action()\r\n    this.message().innerHTML =\r\n      `Membership queries = ${this.learner.member_number} - Equivalence queries = ${this.learner.equiv_number}` + (this.learner.automaton ? ` - States = ${this.learner.automaton?.state_number()} - Transitions = ${this.learner.automaton?.transition_number()}` : ``) + `<br> ${this.message().innerHTML}`\r\n    if (this.learner.finish) {\r\n      this.message().innerHTML += \"The Teacher has accepted the automaton\";\r\n      this.stopNextStep = true\r\n    }\r\n    document.getElementById('messageHead')?.classList.remove('up');\r\n    document.getElementById('tableHead')?.classList.remove('up');\r\n    document.getElementById('teacher_description')?.classList.remove('up');\r\n\r\n    document.getElementById('table')!.innerHTML = this.tableHTML.innerHTML;\r\n    document.getElementById('teacher_description')!.innerHTML = this.learner.teacher.description;\r\n    const timer = (ms: number) => new Promise(res => setTimeout(res, ms))\r\n    if (this.automaton && !this.automaton.continueAction)\r\n      while (this.automaton && !this.automaton.continueAction) {\r\n        let tm = timer(5);\r\n        await tm.then(() => { if (this.automaton!.continueAction) addHistoryElement(this.automaton) }).catch(e => {\r\n          myLog({ a: [e] });\r\n        });\r\n      } else {\r\n      addHistoryElement(this.automaton)\r\n    }\r\n  }\r\n\r\n  close_action(): boolean {\r\n    const close_rep = this.learner.is_close();\r\n    if (close_rep != undefined) {\r\n      this.message().innerText =\r\n        this.close_message(close_rep);\r\n      this.pile_actions.push(() => {\r\n        this.message().innerText = \"\";\r\n        this.learner.add_elt_in_S(close_rep);\r\n        this.clear_table();\r\n        this.draw_table();\r\n      });\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  consistence_action(): boolean {\r\n    const consistence_rep = this.learner.is_consistent()\r\n    if (consistence_rep != undefined) {\r\n      let s1 = consistence_rep[0];\r\n      let s2 = consistence_rep[1];\r\n      let new_col = consistence_rep[2]\r\n      this.message().innerText = this.consistent_message(s1, s2, new_col);\r\n      this.pile_actions.push(() => {\r\n        this.message().innerText = \"\";\r\n        this.learner.add_elt_in_E(new_col);\r\n        this.clear_table();\r\n        this.draw_table();\r\n      });\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  send_automaton_action() {\r\n    this.message().innerText =\r\n      `The table is consistent and closed, I will send an automaton`;\r\n    let automaton = this.learner.make_automaton();\r\n\r\n    this.automaton = automaton;\r\n    window.automaton = automaton;\r\n    this.pile_actions.push(async () => {\r\n      this.message().innerHTML = \"\";\r\n      automaton.initiate_graph();\r\n      $('#input-automaton')[0].classList.remove('hide');\r\n\r\n      function delay(ms: number) {\r\n        return new Promise(resolve => setTimeout(resolve, ms));\r\n      }\r\n\r\n      while (!automaton.continueAction) {\r\n        await delay(10).then(async () => {\r\n          document.getElementById(\"messageHead\")!.scrollIntoView();\r\n          if (!automaton.continueAction) return\r\n          await delay(10).then(() => {\r\n            let answer = this.learner.make_equiv(automaton);\r\n            myLog({ a: [answer] });\r\n\r\n\r\n            if (answer != undefined) {\r\n              this.message().innerText =\r\n                `The sent automaton is not valid, here is a counter-exemple ${answer}`;\r\n              this.pile_actions.push(() => {\r\n                this.message().innerHTML = \"\";\r\n                clear_automaton_HTML();\r\n                this.learner.table_to_update_after_equiv(answer!, true)\r\n                this.clear_table();\r\n                this.draw_table();\r\n              })\r\n              return;\r\n            }\r\n            this.learner.finish = true;\r\n            ($(\"#next_step\")[0] as HTMLButtonElement).classList.add('hide');\r\n            ($(\"#go_to_end\")[0] as HTMLButtonElement).classList.add('hide');\r\n          }\r\n          );\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  abstract close_message(close_rep: string): string;\r\n\r\n  abstract consistent_message(s1: string, s2: string, new_col: string): string;\r\n\r\n  async go_to_end() {\r\n    while (!this.learner.finish) {\r\n      await this.next_step();\r\n    }\r\n  }\r\n\r\n  message() {\r\n    return document.getElementById('message')!\r\n  }\r\n}"],"file":"HTML_LearnerBase.js"}